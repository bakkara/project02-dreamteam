{"mappings":"C,A,WCAA,IAAM,EAAW,SAAS,aAAA,CAAc,aAClC,EAAU,SAAS,aAAA,CAAc,YAEvC,eAAe,EAAQ,CAAM,EAG3B,GAAI,CACF,IAAM,EAAW,MAAM,MAFP,AADD,6CACY,GAG3B,GAAI,CAAC,EAAS,EAAA,CACZ,MAAM,AAAI,MAAM,SAElB,IAAM,EAAO,MAAM,EAAS,IAA5B,GACA,OAAO,CACT,CAAE,MAAO,EAAK,CAEZ,OADA,QAAQ,GAAA,CAAI,EAAI,OAAhB,EACO,IACT,CACF,CACA,SAAS,IACP,IAAM,EACJ,KAAK,KAAA,CAAM,aAAa,OAAA,CAAQ,iBAAmB,EAAE,CACvD,OAAO,CACT,CAgEA,IAAM,EAA0B,GA7D9B,CAAA,EAAS,SAAA,CAAY,GACjB,AAAmB,IAAnB,AA6DqB,EA7Db,MAAA,CACV,EAAQ,KAAA,CAAM,OAAA,CAAU,SAExB,EAAQ,KAAA,CAAM,OAAA,CAAU,OACxB,AAyDuB,EAzDf,OAAA,CAAQ,MAAM,IACpB,GAAI,CACF,IAAM,EAAW,MAAM,EAAQ,GAC/B,AAOR,CAAA,SAAwB,CAAI,EAC1B,IAAM,EAAW,SAAS,aAAA,CAAc,MACxC,CAAA,EAAS,SAAA,CAAY,CAAC;;mCAEW,EAAE,EAAK,UAAA,CAAW,OAAO,EAAE,EAAK,SAAA,CAAU;8BAC/C,EAAE,EAAK,KAAA,CAAM;iCACV,EAAE,EAAK,SAAA,CAAU;oCACd,EAAE,EAAK,WAAA,CAAY;+BACxB,EAAE,EAAK,MAAA,CAAO;;QAErC,EACE,EAAK,KAAA,CACD,EAAK,KAAA,CACF,GAAA,CACC,AAAA,GACE,CAAC,gCAAgC,EAAE,EAAK,SAAS,EAAE,EAAK,UAAU,CAAC,EAEtE,IAAA,CAAK,IACR,GACL;;;;;EAKP,CAAC,CAED,EAAS,WAAA,CAAY,GAErB,IAAM,EAAe,EAAS,aAAA,CAAc,kBAC5C,EAAa,gBAAA,CAAiB,QAAS,KACrC,AASJ,CAAA,SAAoC,CAAc,EAChD,IAAM,EAAe,IAA4B,MAAA,CAC/C,AAAA,GAAU,IAAW,GAEvB,aAAa,OAAA,CAAQ,cAAe,KAAK,SAAA,CAAU,GACrD,CAAA,EAd+B,EAAK,GAAhC,EACA,EAAS,MAAT,GAE2C,IAAvC,IAA4B,MAAA,EAC9B,CAAA,EAAQ,KAAA,CAAM,OAAA,CAAU,OAD1B,CAGF,EACF,CAAA,EA5CuB,EACjB,CAAE,MAAO,EAAK,CACZ,QAAQ,GAAA,CAAI,EAAI,OAAhB,CACF,CACF,G","sources":["<anon>","src/shopping-list.js"],"sourcesContent":["(function () {\nvar $818260bfa8f12ff7$exports = {};\nconst $818260bfa8f12ff7$var$bookList = document.querySelector(\"#bookList\");\nconst $818260bfa8f12ff7$var$message = document.querySelector(\"#message\");\nasync function $818260bfa8f12ff7$var$getBook(bookId) {\n    const BASE_URL = \"https://books-backend.p.goit.global/books/\";\n    const searchUrl = BASE_URL + bookId;\n    try {\n        const response = await fetch(searchUrl);\n        if (!response.ok) throw new Error(\"Error\");\n        const data = await response.json();\n        return data;\n    } catch (err) {\n        console.log(err.message);\n        return null;\n    }\n}\nfunction $818260bfa8f12ff7$var$loadBooksFromLocalStorage() {\n    const booksFromLocalStorage = JSON.parse(localStorage.getItem(\"targetBooks\")) || [];\n    return booksFromLocalStorage;\n}\nfunction $818260bfa8f12ff7$var$displayBooksInShoppingList(bookIds) {\n    $818260bfa8f12ff7$var$bookList.innerHTML = \"\";\n    if (bookIds.length === 0) $818260bfa8f12ff7$var$message.style.display = \"block\";\n    else {\n        $818260bfa8f12ff7$var$message.style.display = \"none\";\n        bookIds.forEach(async (bookId)=>{\n            try {\n                const bookData = await $818260bfa8f12ff7$var$getBook(bookId);\n                $818260bfa8f12ff7$var$createBookCard(bookData);\n            } catch (err) {\n                console.log(err.message);\n            }\n        });\n    }\n}\nfunction $818260bfa8f12ff7$var$createBookCard(book) {\n    const bookCard = document.createElement(\"div\");\n    bookCard.innerHTML = `\n<div class=\"book-card\">\n      <img class=\"book-image\" src=\"${book.book_image}\" alt=\"${book.list_name}\">\n      <div class=\"book-title\">${book.title}</div>\n      <div class=\"book-category\">${book.list_name}</div>\n      <div class=\"book-description\">${book.description}</div>\n      <div class=\"book-author\">${book.author}</div>\n      <div class=\"book-links\">\n        ${book.links ? book.links.map((link)=>`<div class=\"book-link\"><a href=\"${link}\">Buy on ${link}</a></div>`).join(\"\") : \"\"}\n      </div>\n      <button class=\"delete-button\"><svg width=\"16\" height=\"16\" class=\"shopping-svg\">\n                    <use href=\"./img/symbol-defs.svg#icon-dump\"></use></button>\n    </div>\n  `;\n    $818260bfa8f12ff7$var$bookList.appendChild(bookCard);\n    const deleteButton = bookCard.querySelector(\".delete-button\");\n    deleteButton.addEventListener(\"click\", ()=>{\n        $818260bfa8f12ff7$var$removeBookFromLocalStorage(book._id);\n        bookCard.remove();\n        if ($818260bfa8f12ff7$var$loadBooksFromLocalStorage().length === 0) $818260bfa8f12ff7$var$message.style.display = \"block\";\n    });\n}\nfunction $818260bfa8f12ff7$var$removeBookFromLocalStorage(bookIdToRemove) {\n    const updatedBooks = $818260bfa8f12ff7$var$loadBooksFromLocalStorage().filter((bookId)=>bookId !== bookIdToRemove);\n    localStorage.setItem(\"targetBooks\", JSON.stringify(updatedBooks));\n}\nconst $818260bfa8f12ff7$var$bookIdsFromLocalStorage = $818260bfa8f12ff7$var$loadBooksFromLocalStorage();\n$818260bfa8f12ff7$var$displayBooksInShoppingList($818260bfa8f12ff7$var$bookIdsFromLocalStorage);\n\n})();\n//# sourceMappingURL=shopping-list.50f0987c.js.map\n","const bookList = document.querySelector('#bookList');\nconst message = document.querySelector('#message');\n\nasync function getBook(bookId) {\n  const BASE_URL = 'https://books-backend.p.goit.global/books/';\n  const searchUrl = BASE_URL + bookId;\n  try {\n    const response = await fetch(searchUrl);\n    if (!response.ok) {\n      throw new Error('Error');\n    }\n    const data = await response.json();\n    return data;\n  } catch (err) {\n    console.log(err.message);\n    return null;\n  }\n}\nfunction loadBooksFromLocalStorage() {\n  const booksFromLocalStorage =\n    JSON.parse(localStorage.getItem('targetBooks')) || [];\n  return booksFromLocalStorage;\n}\n\nfunction displayBooksInShoppingList(bookIds) {\n  bookList.innerHTML = '';\n  if (bookIds.length === 0) {\n    message.style.display = 'block';\n  } else {\n    message.style.display = 'none';\n    bookIds.forEach(async bookId => {\n      try {\n        const bookData = await getBook(bookId);\n        createBookCard(bookData);\n      } catch (err) {\n        console.log(err.message);\n      }\n    });\n  }\n}\nfunction createBookCard(book) {\n  const bookCard = document.createElement('div');\n  bookCard.innerHTML = `\n<div class=\"book-card\">\n      <img class=\"book-image\" src=\"${book.book_image}\" alt=\"${book.list_name}\">\n      <div class=\"book-title\">${book.title}</div>\n      <div class=\"book-category\">${book.list_name}</div>\n      <div class=\"book-description\">${book.description}</div>\n      <div class=\"book-author\">${book.author}</div>\n      <div class=\"book-links\">\n        ${\n          book.links\n            ? book.links\n                .map(\n                  link =>\n                    `<div class=\"book-link\"><a href=\"${link}\">Buy on ${link}</a></div>`\n                )\n                .join('')\n            : ''\n        }\n      </div>\n      <button class=\"delete-button\"><svg width=\"16\" height=\"16\" class=\"shopping-svg\">\n                    <use href=\"./img/symbol-defs.svg#icon-dump\"></use></button>\n    </div>\n  `;\n\n  bookList.appendChild(bookCard);\n\n  const deleteButton = bookCard.querySelector('.delete-button');\n  deleteButton.addEventListener('click', () => {\n    removeBookFromLocalStorage(book._id);\n    bookCard.remove();\n\n    if (loadBooksFromLocalStorage().length === 0) {\n      message.style.display = 'block';\n    }\n  });\n}\n\nfunction removeBookFromLocalStorage(bookIdToRemove) {\n  const updatedBooks = loadBooksFromLocalStorage().filter(\n    bookId => bookId !== bookIdToRemove\n  );\n  localStorage.setItem('targetBooks', JSON.stringify(updatedBooks));\n}\n\nconst bookIdsFromLocalStorage = loadBooksFromLocalStorage();\ndisplayBooksInShoppingList(bookIdsFromLocalStorage);\n"],"names":["$818260bfa8f12ff7$var$bookList","document","querySelector","$818260bfa8f12ff7$var$message","$818260bfa8f12ff7$var$getBook","bookId","response","fetch","BASE_URL","ok","Error","data","json","err","console","log","message","$818260bfa8f12ff7$var$loadBooksFromLocalStorage","booksFromLocalStorage","JSON","parse","localStorage","getItem","$818260bfa8f12ff7$var$bookIdsFromLocalStorage","innerHTML","bookIds","length","style","display","forEach","bookData","$818260bfa8f12ff7$var$createBookCard","book","bookCard","createElement","book_image","list_name","title","description","author","links","map","link","join","appendChild","deleteButton","addEventListener","$818260bfa8f12ff7$var$removeBookFromLocalStorage","bookIdToRemove","updatedBooks","filter","setItem","stringify","_id","remove"],"version":3,"file":"shopping-list.50f0987c.js.map"}